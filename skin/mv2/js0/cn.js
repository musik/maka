!function(e,t){var r=!0,n=e.document,a=n.location,o=a.protocol,c=(new Date).getTime();if(e.Manifold===t){Manifold={},r=!1;var s={opener:opener,pageId:null,customize:e.WolfSmoke||{},version:"2.1"},u={samplerate:s.customize.samplerate||1,siteNo:s.customize.siteNo||2,logSeverOne:o+"//dmtracking.1688.com/b.jpg",logSeverTwo:o+"//dmtracking.1688.com/c.jpg",tracelogSever:o+"//stat.1688.com/tracelog/click.html",errorSever:o+"//stat.1688.com/dw/error.html",spmServer:o+"//stat.1688.com/spm.html",acookieSever:o+"//acookie.1688.com/1.gif",needDefaultCookies:["cna","ali_apache_id"],isCheckLogin:!0,isSetCookieToAcookie:!0},m={isObject:function(e){return e===Object(e)},isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e&&"[object Number]"==Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e||"[object String]"==Object.prototype.toString.call(e)},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},trim:function(e){return this.isString(e)?String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,""):""},btoa:function(t){if(e.btoa)return e.btoa(t);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(len=t.length,i=0,out="";len>i;){if(c1=255&t.charCodeAt(i++),i===len){out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4),out+="==";break}if(c2=t.charCodeAt(i++),i===len){out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4|(240&c2)>>4),out+=r.charAt((15&c2)<<2),out+="=";break}c3=t.charCodeAt(i++),out+=r.charAt(c1>>2),out+=r.charAt((3&c1)<<4|(240&c2)>>4),out+=r.charAt((15&c2)<<2|(192&c3)>>6),out+=r.charAt(63&c3)}return out},combineJson:function(e,t,r){var n={};for(var a in t)(r||!e.hasOwnProperty(a))&&(n[a]=t[a],delete e[a]);for(var i in e)n[i]=e[i];return n},combineParam:function(e,t,r,n){var a=[];for(var i in t)(n||!e.hasOwnProperty(i))&&(a.push(i+"="+t[i]),delete e[i]);for(var o in e)a.push(o+"="+e[o]);return a.join(r)},parseParam:function(e,t){var r,n=null,a={};if(this.isString(e)&&e.length){r=e.split(t);for(var i=0,o=r.length;o>i;i++)n=r[i].split("="),a[n[0]]=n[1]}return a},random:function(){return Math.round(2147483647*Math.random())},getReferrer:function(){var e="-";try{e=n.referrer||s.opener.location.href||"-"}catch(t){e="-"}return e},randomPageId:function(){var t=(e.dmtrack_pageid||"")+c;for(t=t.substr(0,20);t.length<42;)t+=m.random();return t=t.substr(0,42),s.pageId=e.dmtrack_pageid=e.unique_pageid=t,t},sampling:function(){return Math.random()-u.samplerate<=0},trimHttpStr:function(e){return e.substr(e.indexOf("://")+2)}},l=function(){var t=function(t,r,n){var a,i=new Image,o="_img_"+m.random(),c=-1==t.indexOf("?")?"?":"&",s=r?m.isString(r)?r:"":"";return e[o]=i,i.onload=i.onerror=function(){e[o]=null,!n||n()},i.src=a=s?t+c+s:t,i=null,a},r=function(e,t){var r=n.getElementsByTagName("head")[0],a=n.createElement("script"),i=!1;a.src=e,a.async=!0;var o=t;m.isFunction(o)&&(a.onerror=function(t){o({url:e,event:t})}),a.onload=a.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,a.onload=a.onreadystatechange=null,a&&a.parentNode&&a.parentNode.removeChild(a))},r.appendChild(a)},a=function(e,t){var r="",n="",a=[];return e&&!m.isEmptyObject(e)&&(r=m.btoa(m.combineParam(e,{},"&"))),t.ver=s.version,t.t=+new Date,n=m.combineParam(t,{},"&"),r&&a.push(r),n&&a.push(n),a.join("&")};return{loadScript:r,send:function(e,r,n){var a=r.length;2048>=a?t(e,r,n):8192>=a?t(e,"len="+a+"&"+r,n):t(e,"err=len&len="+a+"&"+r,n)},sendStat:function(e,t,r,n){var i=a(t,r);this.send(e,i,n)},sendError:function(e,t,r){var n="type="+t+"&exception="+e.message;this.send(u.errorSever,n,r)}}}(),f=function(){var e=function(e){var t={};if(e&&m.isString(e))for(var r=e.split(/;\s/g),n="",a="",i="",o=0,c=r.length;c>o;o++)i=r[o].match(/([^=]+)=/i),m.isArray(i)?(n=unescape(i[1]),a=unescape(r[o].substring(i[1].length+1))):(n=unescape(r[o]),a=""),t[n]=a;return t},t=function(e){return e=new Date(c+e),";expires="+e.toGMTString()},r=function(e,r,n){var a=n.expires||1,i=n.path||"",o=n.domain||"",c=n.secure||!1,s=escape(e)+"="+escape(r);return a instanceof Date&&(s+="; expires="+a.toUTCString()),a&&m.isNumber(a)&&(s+=t(24*a*60*60*1e3)),i&&m.isString(i)&&(s+="; path="+i),o&&m.isString(o)&&(s+="; domain="+o),c&&(s+="; secure"),s};return{get:function(t){if(!t||!m.isString(t))return null;var r=e(n.cookie);return t in r?r[t]:null},getSub:function(e,t){var r=this.getSubCookies(e);return r?t&&m.isString(t)?t in r?r[t]:null:null:null},getSubCookies:function(e){var t=this.get(e),r=m.parseParam(t,"|");return r},set:function(e,t,a){if(a=a||{},t&&m.isString(e)){var i=r(e,t,a);n.cookie=i}},setSub:function(e,t,r,n){if(e&&m.isString(e)&&t&&m.isString(t)&&r){var a=this.getSubCookies(e)||{},i={};i[t]=r,this.set(e,m.combineParam(a,i,"|",!0),n)}},setSubs:function(e,t,r){if(e&&m.isString(e)){var n=this.getSubCookies(e)||{};this.set(e,m.combineParam(n,t,"|",!0),r)}},remove:function(e){n.cookie=r(e,"",{expires:new Date(0)})},removeSub:function(e,t){if(e&&m.isString(e)&&t&&m.isString(t)){var r=this.getSubCookies(e);r&&r.hasOwnProperty(t)&&(delete r[t],this.set(e,m.combineParam(r,{},"|")))}}}}(),d=Manifold.UA=function(){var t,r,n={trident:0,webkit:0,gecko:0,presto:0,khtml:0,name:"other",ver:null},a={ie:0,firefox:0,chrome:0,safari:0,opera:0,konq:0,name:"other",ver:null},i={name:"",ver:null},o={win:!1,mac:!1,x11:!1,name:"other"},c="other",s=e.navigator,u=s.userAgent,m=s.platform,l=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))};if(e.opera)n.ver=a.ver=l(e.opera.version()),n.presto=a.opera=parseFloat(n.ver),n.name="presto",a.name="opera";else if(/AppleWebKit\/(\S+)/.test(u))if(n.ver=l(RegExp.$1),n.webkit=n.ver,n.name="webkit",/Chrome\/(\S+)/.test(u))a.ver=l(RegExp.$1),a.chrome=a.ver,a.name="chrome";else if(/Version\/(\S+)/.test(u))a.ver=l(RegExp.$1),a.safari=a.ver,a.name="safari";else{var f=1;f=n.webkit<100?1:n.webkit<312?1.2:n.webkit<412?1.3:2,a.safari=a.ver=f,a.name="safari"}else/KHTML\/(\S+)/.test(u)||/Konqueror\/([^;]+)/.test(u)?(n.ver=a.ver=l(RegExp.$1),n.khtml=a.konq=n.ver,n.name="khtml",a.name="konq"):/rv:([^\)]+)\) Gecko\/\d{8}/.test(u)?(n.ver=l(RegExp.$1),n.gecko=n.ver,n.name="gecko",/Firefox\/(\S+)/.test(u)&&(a.ver=l(RegExp.$1),a.firefox=a.ver,a.name="firefox")):/IE ([^;]+)/.test(u)&&(n.ver=a.ver=l(RegExp.$1),n.trident=a.ie=n.ver,n.name="trident",a.name="ie");if(i.name=a.name,i.ver=a.ver,t=u.match(/360SE/))i.name="se360",i.ver=3;else if((t=u.match(/Maxthon/))&&(r=WIN.external)){i.name="maxthon";try{i.ver=l(r.max_version)}catch(d){i.ver=.1}}else(t=u.match(/TencentTraveler\s([\d.]*)/))?(i.name="tt",i.ver=l(t[1])||.1):(t=u.match(/TheWorld/))?(i.name="theworld",i.ver=3):(t=u.match(/SE\s([\d.]*)/))&&(i.name="sougou",i.ver=l(t[1])||.1);if(o.win=0==m.indexOf("Win"),o.mac=0==m.indexOf("Mac"),o.x11="X11"==m||0==m.indexOf("Linux"),o.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(u))if("NT"==RegExp.$1)switch(RegExp.$2){case"5.0":o.win="2000";break;case"5.1":o.win="XP";break;case"6.0":o.win="Vista";break;case"6.1":o.win="7";break;case"6.3":o.win="8";break;default:o.win="NT"}else o.win="9x"==RegExp.$1?"ME":RegExp.$1;o.name="windows"+o.win}return o.mac&&(o.name="mac"),o.x11&&(o.name="x11"),"CE"==o.win?c="windows mobile":/ Mobile\//.test(u)?c="apple":(t=u.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(c=t[0].toLowerCase()),{engine:n,browser:a,extraBrowser:i,system:o,mobile:c,resolution:e.screen.width+"*"+e.screen.height,language:s.language||s.browserLanguage}}(),p=Manifold.SPM=function(){var t=!0,r=!1,a=!1,i="data-spm",o="data-spm-anchor-id",c="data-spm-protocol",f=r,d={},p=r,g="",h="",v=u.spmServer,b=!!n.attachEvent,S="attachEvent",k="addEventListener",w=b?S:k,y=r,x=function(e,t){return e.indexOf(t)>-1},P=function(e){var t;try{t=m.trim(e.getAttribute("href",2))}catch(r){}return t||""},_=function(e,t){return e&&e.getAttribute?e.getAttribute(t)||"":""},A=function(e,t,r){if(e&&e.setAttribute)try{e.setAttribute(t,r)}catch(n){}},E=function(e){var t,r;try{return t=[].slice.call(e)}catch(n){t=[],r=e.length;for(var a=0;r>a;a++)t.push(e[a]);return t}},M=function(t,n,a){t[w]((b?"on":"")+n,function(t){t=t||e.event;var r=t.target||t.srcElement;a(t,r)},r)},C=function(){return n.getElementsByTagName("meta")},O=function(){var e,t,r,n,a=C();for(e=0,t=a.length;t>e;e++)r=a[e],n=_(r,"name"),n===i&&(h=_(r,c),g=_(r,"content"))},N=function(){var t,r="",i="";return O(),e._SPM_a&&e._SPM_b&&(r=e._SPM_a.replace(/^{(\w+)}$/g,"$1"),i=e._SPM_b.replace(/^{(\w+)}$/g,"$1"),"{}"!==r&&"{-}"!==r&&"{}"!==i&&"{-}"!==i&&(f="true")),r&&i&&"{}"!==r&&"{}"!==i&&"{-}"!==r&&"{-}"!==i||(r=g,i=_(n.body,"data-spm")||0),t=r+"."+i,r&&i&&/^[\w\-\*]+\.[\w\-\*]+$/.test(t)||(a=!0,t=0),t}(),T=function(e){for(var t;(e=e.parentNode)&&"BODY"!=e.tagName;)if(t=_(e,c))return t;return""},j=function(t){e.jQuery?jQuery(n).ready(t):"complete"===n.readyState?t():M(e,"load",t)},I=function(e,t){if(t||(t=n),n.evaluate)return t.evaluate(e,n,null,9,null).singleNodeValue;for(var r,a=e.split("/");!r&&a.length>0;)r=a.shift();var i,o=/^.+?\[@id="(.+?)"]$/i,c=/^(.+?)\[(\d+)]$/i;return(i=r.match(o))?t=t.getElementById(i[1]):(i=r.match(c))&&(t=t.getElementsByTagName(i[1])[parseInt(i[2])]),t?0==a.length?t:I(a.join("/"),t):null},L=function(){var e,t,r,n={};for(e in d)d.hasOwnProperty(e)&&(t=I(e),t&&(n[e]=1,r=d[e],A(t,i,("A"==t.tagName?r.spmd:r.spmc)||"")));for(e in n)n.hasOwnProperty(e)&&delete d[e]};return wh_init=function(){if(!p){if(!e.spmData)return void(y||setTimeout(arguments.callee,100));p=t;var r,n,a,i,o=e.spmData.data;if(o&&m.isArray(o)){for(r=0,n=o.length;n>r;r++)a=o[r],i=a.xpath,i=i.replace(/^id\("(.+?)"\)(.*)/g,'//*[@id="$1"]$2'),d[i]={spmc:a.spmc,spmd:a.spmd};L()}}},isAlipayUrl=function(e){return e?!!e.match(/^[^\?]*\balipay\.(?:com|net)\b/i):!1},getAnchor4thId=function(e){var t;return a?t="0":(t=_(e,i),t&&t.match(/^d\w+$/)||(t="")),t},removeAnchorSPM=function(e){return e&&/&?\bspm=[^&#]*/.test(e)&&(e=e.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")),e},updateHrefWithSPMId=function(e,t){if(e=removeAnchorSPM(e),!t)return e;var r,n,a,i,o,c,s,u="&";if(-1!=e.indexOf("#")&&(a=e.split("#"),e=a.shift(),n=a.join("#")),i=e.split("?"),o=i.length-1,a=i[0].split("//"),a=a[a.length-1].split("/"),c=a.length>1?a.pop():"",o>0&&(r=i.pop(),e=i.join("?")),r&&o>1&&-1==r.indexOf("&")&&-1!=r.indexOf("%")&&(u="%26"),e=e+"?spm="+t+(r?u+r:"")+(n?"#"+n:""),s=x(c,".")?c.split(".").pop().toLowerCase():""){if({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1}.hasOwnProperty(s))return 0;!r&&1>=o&&(n||{htm:1,html:1,php:1}.hasOwnProperty(s)||(e+="&file="+c))}return e},anchorAddSpmParam=function(e,t){var r=e,n=P(r),a="i"==(_(r,c)||T(r)||h),i=v+"?spm=";n&&t&&(0===n.indexOf("#")||0===n.toLowerCase().indexOf("javascript:")||0===n.toLowerCase().indexOf("mailto:")||0===n.toLowerCase().indexOf("tel:")||isAlipayUrl(n)||(a?(n=removeAnchorSPM(n),i+=t+"&st_page_id="+s.pageId+"&url="+encodeURIComponent(n)+"&cache="+m.random(),l.send(i,"")):(n=updateHrefWithSPMId(n,t))&&spmWriteHref(r,n)))},spmWriteHref=function(e,t){var r,a=e,i=a.innerHTML;i&&-1==i.indexOf("<")&&(r=n.createElement("b"),r.style.display="none",a.appendChild(r)),a.href=t,r&&a.removeChild(r)},dealNoneSPMLink=function(e){var t=e,r=[N,0,0].join(".");anchorAddSpmParam(t,r)},getParentSPMId=function(e){for(var t,r=e.tagName.toLowerCase(),n={};e&&"html"!==r&&"body"!==r;){if(f&&L(),t=_(e,i)){n={spmEl:e,spmId:t};break}if(!(e=e.parentNode))break;r=e.tagName.toLowerCase()}return n},initSPMModule=function(e,t){var r=e,n=t.spmEl,a=t.spmId,i=[N,a].join(".");if(i.match&&i.match(/^[\w\-\*]+\.[\w\-\*]+\.[\w\-\*]+$/))for(var c,s,u,m=E(n.getElementsByTagName("a")),l=E(n.getElementsByTagName("area")),f=m.concat(l),d=0,p=0,g=f.length;g>p;p++)if(c=f[p],s=P(c),s&&(d++,c===r)){u=i+"."+(getAnchor4thId(c)||d),A(c,o,u);break}},setSpmParm=function(e){var t,r=e,n=_(r,o);if(!n){if(t=getParentSPMId(r.parentNode),!t.spmId)return void dealNoneSPMLink(r);initSPMModule(r,t),n=_(r,o)}anchorAddSpmParam(r,n)},doTrace=function(e,t){for(var r;t&&(r=t.tagName.toLowerCase());){if("a"===r||"area"===r){setSpmParm(t);break}if("body"===r||"html"===r)break;t=t.parentNode}},init=function(){j(function(){y=t,N&&(wh_init(),M(n.body,"mousedown",doTrace),M(n.body,"keydown",doTrace))})},{cnt:N,init:init}}(),g=Manifold.Essential=function(){var t=function(){var e="true"===f.get("__cn_logon__");return e},r=function(){var t=e.dmtrack_c;return t&&"{-}"!==t?(t=t.substring(1,t.length-1).replace(/ali_resin_trace=/,""),m.parseParam(t,"|")):{}},n=function(){try{var e=m.getReferrer(),t=m.random(),r=s.customize.acookieAdditional||{},n={cache:t,pre:e};l.sendStat(u.acookieSever,{},m.combineJson(n,r))}catch(a){l.sendError(a,"acookie")}},i=function(){var e=d.extraBrowser,t=e.name+e.ver.toFixed(1),r=d.system.name,n=t+"|"+r+"|"+d.resolution+"|"+d.language;return n},o=function(e){var t=s.customize.needCookies,r=u.needDefaultCookies;t&&m.isArray(r)&&(r=r.concat(t));for(var n,a,i=r.length;i--;)n=r[i],a=f.get(n)||"-",e[n]=a};return{send:function(){var e=encodeURI(m.getReferrer()),c=f.getSubCookies("ali_apache_track")||{},s=r(),d=f.getSubCookies("aliBeacon_bcookie")||{},g=encodeURI(a.href);u.isSetCookieToAcookie&&n(),o(c),u.isCheckLogin&&!s.c_signed&&(s.c_signed=t()?1:0),m.combineJson(s,d,!0),f.remove("aliBeacon_bcookie"),l.sendStat(u.logSeverOne,{p:"{"+u.siteNo+"}",u:"{"+m.trimHttpStr(g)+"}",m:"{GET}",s:"{200}",r:"{"+e+"}",a:"{"+m.combineParam(c,{},"|")+"}",b:"{-}",c:"{"+m.combineParam(s,d,"|",!0)+"}"},{spm_cnt:p.cnt,pageid:m.randomPageId(),sys:i()})}}}(),h=Manifold.api={log:function(e,t){try{var r={},n={},a=e.split("?");a[1]&&(n=m.parseParam(a[1],"&")),m.isString(t)?("?"===t.substring(0,1)&&(t=t.substring(1)),r=m.parseParam(t,"&")):m.isObject(t)&&(r=t),r.st_page_id=s.pageId,l.sendStat(a[0],{},m.combineJson(r,n))}catch(i){l.sendError(i,"log")}},asysLog:function(e,t,r){try{t&&"-"!==t||(t=a.href),l.sendStat(u.logSeverTwo,{p:"{"+u.siteNo+"}",u:"{"+m.trimHttpStr(e)+"}",m:"{GET}",s:"{200}",r:"{"+t+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+m.combineParam(r||{},{},"|")||"-}"},{pageid:m.randomPageId()})}catch(n){l.sendError(n,"asysLog")}},flashLog:function(t,r){try{var n=e.dmtrack_c;n=n&&"{-}"!==n?n.substring(1,n.length-1).replace(/ali_resin_trace=/,""):"-",r&&"-"!==r||(r=a.href),l.sendStat(u.logSeverTwo,{p:"{"+u.siteNo+"}",u:"{"+t+"}",m:"{GET}",s:"{200}",r:"{"+r+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+n+"}"},{pageid:m.randomPageId(),dmtrack_type:"xuanwangpu"})}catch(i){l.sendError(i,"flashLog")}}};if(e.dmtrack={clickstat:function(e,t){h.log(e,t)},clickunite:function(e){h.log(u.tracelogSever,e)},tracelog:function(e){h.log(u.tracelogSever,{tracelog:e})},beacon_click:function(e,t,r){h.asysLog(e,t,r)},flash_dmtracking:function(e,t){h.flashLog(e,t)}},m.sampling())try{g.send(),l.loadScript("http://a.tbcdn.cn/s/aplus_b2b.js?t=20130911"),p.init()}catch(v){l.sendError(v,"essential")}}}(window);
